(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["list"],{"0975":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"list",attrs:{id:"list"}},[t.loading?o("Spin",{attrs:{fix:""}}):t._e(),o("Card",{staticClass:"list-header"},[o("h3",{attrs:{id:"notebook-list-header"}},[t._v(t._s(t.$store.state.username)+"的笔记")])]),o("Split",{staticClass:"list-body",model:{value:t.split,callback:function(e){t.split=e},expression:"split"}},[o("div",{staticClass:"demo-split-pane",attrs:{slot:"left"},slot:"left"},[o("CellGroup",{on:{"on-click":t.handleNotebookSelect}},[t._l(t.notebookList,(function(e,n){return[o("Cell",{key:n,attrs:{title:e.notebookName,name:n,selected:t.$store.state.selectedNotebook.notebookName===e.notebookName}},[o("Icon",{attrs:{slot:"extra",type:"md-filing",size:16},on:{click:function(o){return o.stopPropagation(),t.handleDownloadNoteSelect(e)}},slot:"extra"}),o("Icon",{attrs:{slot:"extra",type:"md-trash",size:16},on:{click:function(o){return o.stopPropagation(),t.handleDeleteNotebook(e)}},slot:"extra"})],1)]}))],2),o("Card",{staticClass:"card-wrapper"},[o("div",{staticClass:"card-content",on:{click:t.handleAddNotebook}},[o("h3",[o("Icon",{attrs:{type:"md-add",size:24}})],1)])])],1),o("div",{staticClass:"demo-split-pane",attrs:{slot:"right"},slot:"right"},[o("CellGroup",{on:{"on-click":t.handleSelectNote}},[t._l(t.noteList,(function(e,n){return[o("Cell",{key:n,attrs:{title:e.noteName,name:n,selected:t.$store.state.selectedNote.noteName===e.noteName}},[o("Icon",{attrs:{slot:"extra",type:"md-create",size:16},on:{click:function(o){return o.stopPropagation(),t.handleRenameNote(e)}},slot:"extra"}),o("Icon",{attrs:{slot:"extra",type:"md-trash",size:16},on:{click:function(o){return o.stopPropagation(),t.handleDeleteNote(e)}},slot:"extra"})],1)]}))],2),void 0===t.$store.state.selectedNotebook.notebookName?o("Alert",[t._v("\n        请先选择笔记本\n        "),o("template",{slot:"desc"},[t._v("\n          之后选中笔记本中的笔记会在此显示。\n        ")])],2):t._e(),void 0!==t.$store.state.selectedNotebook.notebookName?o("Card",{staticClass:"card-wrapper"},[o("div",{staticClass:"card-content",on:{click:t.handleAddNote}},[o("h3",[o("Icon",{attrs:{type:"md-add",size:24}})],1)])]):t._e()],1)]),o("Modal",{attrs:{title:"选择需要生成markdown文件的笔记"},on:{"on-ok":t.handleDownloadNotebook},model:{value:t.modalShow,callback:function(e){t.modalShow=e},expression:"modalShow"}},[o("CheckboxGroup",{staticClass:"document-select-checkbox",model:{value:t.selectGenerateDocumentNoteList,callback:function(e){t.selectGenerateDocumentNoteList=e},expression:"selectGenerateDocumentNoteList"}},[t._l(t.$store.state.selectedNotebook.noteArrayList,(function(t){return[o("Checkbox",{attrs:{label:t.noteName}})]}))],2),o("h4",[t._v(t._s(0===t.selectGenerateDocumentNoteList.length?"":"生成顺序为："+t.selectGenerateDocumentNoteList.map((function(t){return" "+t+" "}))))])],1)],1)},a=[],s=(o("309f"),o("0b53"),o("6d57"),o("d722")),r={components:{Document:Document},data:function(){return{notebookList:[],noteList:[],loading:!1,split:.5,inputName:"",modalShow:!1,selectGenerateDocumentNoteList:[]}},methods:{fetchAllNoteData:function(){var t=this;this.noteList=[],this.notebookList=[],this.$store.commit("setSelectedNote",{}),this.$store.commit("setSelectedBranch",{}),this.$store.commit("setContent",""),this.$Spin.show(),Object(s["i"])({userId:this.$store.state.userId}).then((function(e){if(e=e.data,"200"===e.code){t.notebookList=e.data;var o=!0,n=!1,a=void 0;try{for(var s,r=e.data[Symbol.iterator]();!(o=(s=r.next()).done);o=!0){var i=s.value;i.notebookName===t.$store.state.selectedNotebook.notebookName&&(t.noteList=i.noteArrayList)}}catch(c){n=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(n)throw a}}}else t.$Message.error("获取笔记信息失败: "+e.msg)})).catch((function(e){t.$Message.error("获取笔记信息失败："+e)})).finally((function(){t.$Spin.hide()}))},handleNotebookSelect:function(t){this.$store.dispatch("saveNote",2),this.$store.commit("setSelectedNotebook",this.notebookList[t]),this.fetchAllNoteData()},handleSelectNote:function(t){this.$store.dispatch("saveNote",2),this.$store.commit("setSelectedNote",this.noteList[t]),this.$store.commit("setSelectedBranch",this.noteList[t].branchArrayList[0]),this.$store.dispatch("getNote",this.$store.state.selectedBranch.branchId)},handleDownloadNoteSelect:function(t){this.modalShow=!0,this.$store.commit("setSelectedNotebook",t)},handleDownloadNotebook:function(){var t="http://www.shadowingszy.top:3001/inspiration-notebook/markdown/",e=[],o=!0,n=!1,a=void 0;try{for(var r,i=this.selectGenerateDocumentNoteList[Symbol.iterator]();!(o=(r=i.next()).done);o=!0){var c=r.value,l=!0,d=!1,u=void 0;try{for(var h,m=this.$store.state.selectedNotebook.noteArrayList[Symbol.iterator]();!(l=(h=m.next()).done);l=!0){var f=h.value;if(f.noteName===c){var N=!0,p=!1,b=void 0;try{for(var $,k=f.branchArrayList[Symbol.iterator]();!(N=($=k.next()).done);N=!0){var v=$.value;"主分支"===v.branchName&&e.push(v.branchId)}}catch(y){p=!0,b=y}finally{try{N||null==k.return||k.return()}finally{if(p)throw b}}}}}catch(y){d=!0,u=y}finally{try{l||null==m.return||m.return()}finally{if(d)throw u}}}}catch(y){n=!0,a=y}finally{try{o||null==i.return||i.return()}finally{if(n)throw a}}var g=this;Object(s["g"])({notebookName:this.$store.state.selectedNotebook.notebookName,userId:g.$store.state.userId,order:e.join(",")}).then((function(e){e=e.data,"200"===e.code?window.open(t+e.data):g.$Message.error("生成markdown文件失败："+e.msg)})).catch((function(t){g.$Message.error("生成markdown文件失败："+t)})).finally((function(){g.$Spin.hide()}))},handleDeleteNotebook:function(t){var e=this;this.$Modal.confirm({content:"确认要删除这个笔记吗？",onOk:function(){Object(s["e"])({notebookName:t.notebookName,userId:e.$store.state.userId}).then((function(t){t=t.data,"200"===t.code?(e.$Message.success("删除成功"),e.$store.commit("setSelectedNotebook",{}),e.fetchAllNoteData()):e.$Message.error("删除失败："+t.msg)})).catch((function(t){e.$Message.error("删除失败："+t)})).finally((function(){e.$Spin.hide()}))}})},handleAddNotebook:function(){var t=this,e=this;this.$Modal.confirm({title:"新建笔记本",render:function(e){return e("Input",{props:{value:t.inputName,autofocus:!0,placeholder:"请输入要创建笔记本的名字"},on:{input:function(e){t.inputName=e}}})},onOk:function(){e.$Spin.show(),Object(s["c"])({notebookName:e.inputName,userId:e.$store.state.userId,operator:e.$store.state.operatorName}).then((function(t){t=t.data,"200"===t.code?(e.$Message.success("创建笔记本成功"),e.fetchAllNoteData()):e.$Message.error("创建笔记本失败："+t.msg)})).catch((function(t){e.$Message.error("创建笔记本失败："+t)})).finally((function(){e.$Spin.hide(),e.inputName=""}))}})},handleAddNote:function(){var t=this,e=this;this.$Modal.confirm({title:"新建笔记",render:function(e){return e("Input",{props:{value:t.inputName,autofocus:!0,placeholder:"请输入要创建笔记的名字"},on:{input:function(e){t.inputName=e}}})},onOk:function(){e.$Spin.show(),Object(s["b"])({notebookName:e.$store.state.selectedNotebook.notebookName,noteName:e.inputName,content:"",userId:e.$store.state.userId,operator:e.$store.state.operatorName}).then((function(t){t=t.data,"200"===t.code?(e.$Message.success("创建笔记成功"),e.noteList=t.data.noteArrayList):e.$Message.error("创建笔记失败："+t.msg)})).catch((function(t){e.$Message.error("创建笔记失败："+t)})).finally((function(){e.$Spin.hide(),e.inputName=""}))}})},handleRenameNote:function(t){var e=this,o=this;this.$Modal.confirm({title:"重命名笔记",render:function(t){return t("Input",{props:{value:e.inputName,autofocus:!0,placeholder:"请输入笔记的新名字"},on:{input:function(t){e.inputName=t}}})},onOk:function(){""!==o.inputName?(o.$Spin.show(),Object(s["n"])({userId:o.$store.state.userId,notebookName:o.$store.state.selectedNotebook.notebookName,oldNoteName:t.noteName,newNoteName:o.inputName,operator:o.$store.state.operatorName}).then((function(e){e=e.data,"200"===e.code?(o.$Message.success("笔记重命名成功"),t.noteName=o.inputName):o.$Message.error("笔记重命名失败："+e.msg)})).catch((function(t){o.$Message.error("重命名失败："+t)})).finally((function(){o.$Spin.hide(),o.inputName=""}))):o.$Message.error("名称不能为空")}})},handleDeleteNote:function(t){var e=this;this.$Modal.confirm({content:"确认要删除这个笔记吗？（如果笔记本中最后一篇笔记被删除，笔记本也将会被删除）",onOk:function(){e.noteList.length<=1?Object(s["e"])({notebookName:e.$store.state.selectedNotebook.notebookName,userId:e.$store.state.userId}).then((function(t){t=t.data,"200"===t.code?(e.$Message.success("删除成功"),e.$store.commit("setSelectedNotebook",{}),e.fetchAllNoteData()):e.$Message.error("删除失败："+t.msg)})).catch((function(t){e.$Message.error("删除失败："+t)})).finally((function(){e.$Spin.hide()})):Object(s["d"])({noteName:t.noteName,userId:e.$store.state.userId,notebookName:e.$store.state.selectedNotebook.notebookName}).then((function(t){t=t.data,"200"===t.code?(e.$Message.success("删除成功"),e.noteList=t.data.noteArrayList):e.$Message.error("删除失败："+t.msg)})).catch((function(t){e.$Message.error("删除失败："+t)})).finally((function(){e.$Spin.hide()}))}})}},mounted:function(){this.fetchAllNoteData()},watch:{$route:"fetchData"}},i=r,c=(o("9e95"),o("4e82")),l=Object(c["a"])(i,n,a,!1,null,null,null),d=l.exports;e["default"]=d},"8e26":function(t,e,o){},"9e95":function(t,e,o){"use strict";var n=o("8e26"),a=o.n(n);a.a}}]);