(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["list"],{"0975":function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"list",attrs:{id:"list"}},[e.loading?o("Spin",{attrs:{fix:""}}):e._e(),o("Card",{staticClass:"list-header"},[o("h3",{attrs:{id:"notebook-list-header"}},[e._v(e._s(e.$store.state.username)+"的笔记")])]),o("Split",{staticClass:"list-body",model:{value:e.split,callback:function(t){e.split=t},expression:"split"}},[o("div",{staticClass:"demo-split-pane",attrs:{slot:"left"},slot:"left"},[o("CellGroup",{on:{"on-click":e.handleNotebookSelect}},[e._l(e.notebookList,(function(t,n){return[o("Cell",{key:n,attrs:{title:t.notebookName,name:n,selected:e.$store.state.selectedNotebook.notebookName===t.notebookName}},[o("Icon",{attrs:{slot:"extra",type:"md-filing",size:16},on:{click:function(o){return o.stopPropagation(),e.handleDownloadNoteSelect(t)}},slot:"extra"}),o("Icon",{attrs:{slot:"extra",type:"md-trash",size:16},on:{click:function(o){return o.stopPropagation(),e.handleDeleteNotebook(t)}},slot:"extra"})],1)]}))],2),o("Card",{staticClass:"card-wrapper"},[o("div",{staticClass:"card-content",on:{click:e.handleAddNotebook}},[o("h3",[o("Icon",{attrs:{type:"md-add",size:24}})],1)])])],1),o("div",{staticClass:"demo-split-pane",attrs:{slot:"right"},slot:"right"},[o("CellGroup",{on:{"on-click":e.handleSelectNote}},[e._l(e.noteList,(function(t,n){return[o("Cell",{key:n,attrs:{title:t.noteName,name:n,selected:e.$store.state.selectedNote.noteName===t.noteName}},[o("Icon",{attrs:{slot:"extra",type:"md-create",size:16},on:{click:function(o){return o.stopPropagation(),e.handleRenameNote(t)}},slot:"extra"}),o("Icon",{attrs:{slot:"extra",type:"md-trash",size:16},on:{click:function(o){return o.stopPropagation(),e.handleDeleteNote(t)}},slot:"extra"})],1)]}))],2),void 0===e.$store.state.selectedNotebook.notebookName?o("Alert",[e._v("\n        请先选择笔记本\n        "),o("template",{slot:"desc"},[e._v("\n          之后选中笔记本中的笔记会在此显示。\n        ")])],2):e._e(),void 0!==e.$store.state.selectedNotebook.notebookName?o("Card",{staticClass:"card-wrapper"},[o("div",{staticClass:"card-content",on:{click:e.handleAddNote}},[o("h3",[o("Icon",{attrs:{type:"md-add",size:24}})],1)])]):e._e()],1)]),o("Modal",{attrs:{title:"选择需要生成markdown文件的笔记"},on:{"on-ok":e.handleDownloadNotebook},model:{value:e.modalShow,callback:function(t){e.modalShow=t},expression:"modalShow"}},[o("CheckboxGroup",{staticClass:"document-select-checkbox",model:{value:e.selectGenerateDocumentNoteList,callback:function(t){e.selectGenerateDocumentNoteList=t},expression:"selectGenerateDocumentNoteList"}},[e._l(e.$store.state.selectedNotebook.noteArrayList,(function(e,t){return[o("Checkbox",{key:t,attrs:{label:e.noteName}})]}))],2),o("h4",[e._v(e._s(0===e.selectGenerateDocumentNoteList.length?"":"生成顺序为："+e.selectGenerateDocumentNoteList.map((function(e){return" "+e+" "}))))])],1)],1)},s=[],a=(o("309f"),o("0b53"),o("6d57"),o("d722")),r=o("f355"),i={components:{Document:Document},data:function(){return{notebookList:[],noteList:[],loading:!1,split:.5,inputName:"",modalShow:!1,selectGenerateDocumentNoteList:[]}},methods:{fetchAllNoteData:function(){var e=this;this.noteList=[],this.notebookList=[],this.$store.commit("setSelectedNote",{}),this.$store.commit("setSelectedBranch",{}),this.$store.commit("setContent",""),this.$Spin.show(),Object(a["i"])({userId:this.$store.state.userId}).then((function(t){if(t=t.data,"200"===t.code){e.notebookList=t.data;var o=!0,n=!1,s=void 0;try{for(var a,r=t.data[Symbol.iterator]();!(o=(a=r.next()).done);o=!0){var i=a.value;i.notebookName===e.$store.state.selectedNotebook.notebookName&&(e.noteList=i.noteArrayList)}}catch(c){n=!0,s=c}finally{try{o||null==r.return||r.return()}finally{if(n)throw s}}}else e.$Message.error("获取笔记信息失败: "+t.msg)})).catch((function(t){e.$Message.error("获取笔记信息失败："+t)})).finally((function(){e.$Spin.hide()}))},handleNotebookSelect:function(e){this.$store.dispatch("saveNote",2),this.$store.commit("setSelectedNotebook",this.notebookList[e]),this.fetchAllNoteData()},handleSelectNote:function(e){this.$store.dispatch("saveNote",2),this.$store.commit("setSelectedNote",this.noteList[e]),this.$store.commit("setSelectedBranch",this.noteList[e].branchArrayList[0]),this.$store.dispatch("getNote",this.$store.state.selectedBranch.branchId)},handleDownloadNoteSelect:function(e){this.modalShow=!0,this.selectGenerateDocumentNoteList=[],this.$store.commit("setSelectedNotebook",e)},handleDownloadNotebook:function(){var e=r.downloadZipUrl,t=[],o=!0,n=!1,s=void 0;try{for(var i,c=this.selectGenerateDocumentNoteList[Symbol.iterator]();!(o=(i=c.next()).done);o=!0){var l=i.value,d=!0,u=!1,h=void 0;try{for(var m,f=this.$store.state.selectedNotebook.noteArrayList[Symbol.iterator]();!(d=(m=f.next()).done);d=!0){var N=m.value;if(N.noteName===l){var p=!0,b=!1,k=void 0;try{for(var $,v=N.branchArrayList[Symbol.iterator]();!(p=($=v.next()).done);p=!0){var y=$.value;"主分支"===y.branchName&&t.push(y.branchId)}}catch(w){b=!0,k=w}finally{try{p||null==v.return||v.return()}finally{if(b)throw k}}}}}catch(w){u=!0,h=w}finally{try{d||null==f.return||f.return()}finally{if(u)throw h}}}}catch(w){n=!0,s=w}finally{try{o||null==c.return||c.return()}finally{if(n)throw s}}var g=this;Object(a["g"])({notebookName:this.$store.state.selectedNotebook.notebookName,userId:g.$store.state.userId,order:t.join(",")}).then((function(t){t=t.data,"200"===t.code?window.open(e+t.data):g.$Message.error("生成markdown文件失败："+t.msg)})).catch((function(e){g.$Message.error("生成markdown文件失败："+e)})).finally((function(){g.$Spin.hide()}))},handleDeleteNotebook:function(e){var t=this;this.$Modal.confirm({content:"确认要删除这个笔记吗？",onOk:function(){Object(a["e"])({notebookName:e.notebookName,userId:t.$store.state.userId}).then((function(e){e=e.data,"200"===e.code?(t.$Message.success("删除成功"),t.$store.commit("setSelectedNotebook",{}),t.fetchAllNoteData()):t.$Message.error("删除失败："+e.msg)})).catch((function(e){t.$Message.error("删除失败："+e)})).finally((function(){t.$Spin.hide()}))}})},handleAddNotebook:function(){var e=this,t=this;this.$Modal.confirm({title:"新建笔记本",render:function(t){return t("Input",{props:{value:e.inputName,autofocus:!0,placeholder:"请输入要创建笔记本的名字"},on:{input:function(t){e.inputName=t}}})},onOk:function(){t.$Spin.show(),Object(a["c"])({notebookName:t.inputName,userId:t.$store.state.userId,operator:t.$store.state.operatorName}).then((function(e){e=e.data,"200"===e.code?(t.$Message.success("创建笔记本成功"),t.fetchAllNoteData()):t.$Message.error("创建笔记本失败："+e.msg)})).catch((function(e){t.$Message.error("创建笔记本失败："+e)})).finally((function(){t.$Spin.hide(),t.inputName=""}))}})},handleAddNote:function(){var e=this,t=this;this.$Modal.confirm({title:"新建笔记",render:function(t){return t("Input",{props:{value:e.inputName,autofocus:!0,placeholder:"请输入要创建笔记的名字"},on:{input:function(t){e.inputName=t}}})},onOk:function(){t.$Spin.show(),Object(a["b"])({notebookName:t.$store.state.selectedNotebook.notebookName,noteName:t.inputName,content:"",userId:t.$store.state.userId,operator:t.$store.state.operatorName}).then((function(e){e=e.data,"200"===e.code?(t.$Message.success("创建笔记成功"),t.noteList=e.data.noteArrayList):t.$Message.error("创建笔记失败："+e.msg)})).catch((function(e){t.$Message.error("创建笔记失败："+e)})).finally((function(){t.$Spin.hide(),t.inputName=""}))}})},handleRenameNote:function(e){var t=this,o=this;this.$Modal.confirm({title:"重命名笔记",render:function(e){return e("Input",{props:{value:t.inputName,autofocus:!0,placeholder:"请输入笔记的新名字"},on:{input:function(e){t.inputName=e}}})},onOk:function(){""!==o.inputName?(o.$Spin.show(),Object(a["n"])({userId:o.$store.state.userId,notebookName:o.$store.state.selectedNotebook.notebookName,oldNoteName:e.noteName,newNoteName:o.inputName,operator:o.$store.state.operatorName}).then((function(t){t=t.data,"200"===t.code?(o.$Message.success("笔记重命名成功"),e.noteName=o.inputName):o.$Message.error("笔记重命名失败："+t.msg)})).catch((function(e){o.$Message.error("重命名失败："+e)})).finally((function(){o.$Spin.hide(),o.inputName=""}))):o.$Message.error("名称不能为空")}})},handleDeleteNote:function(e){var t=this;this.$Modal.confirm({content:"确认要删除这个笔记吗？（如果笔记本中最后一篇笔记被删除，笔记本也将会被删除）",onOk:function(){t.noteList.length<=1?Object(a["e"])({notebookName:t.$store.state.selectedNotebook.notebookName,userId:t.$store.state.userId}).then((function(e){e=e.data,"200"===e.code?(t.$Message.success("删除成功"),t.$store.commit("setSelectedNotebook",{}),t.fetchAllNoteData()):t.$Message.error("删除失败："+e.msg)})).catch((function(e){t.$Message.error("删除失败："+e)})).finally((function(){t.$Spin.hide()})):Object(a["d"])({noteName:e.noteName,userId:t.$store.state.userId,notebookName:t.$store.state.selectedNotebook.notebookName}).then((function(e){e=e.data,"200"===e.code?(t.$Message.success("删除成功"),t.noteList=e.data.noteArrayList):t.$Message.error("删除失败："+e.msg)})).catch((function(e){t.$Message.error("删除失败："+e)})).finally((function(){t.$Spin.hide()}))}})}},mounted:function(){this.fetchAllNoteData()},watch:{$route:"fetchData"}},c=i,l=(o("9e95"),o("4e82")),d=Object(l["a"])(c,n,s,!1,null,null,null),u=d.exports;t["default"]=u},"8e26":function(e,t,o){},"9e95":function(e,t,o){"use strict";var n=o("8e26"),s=o.n(n);s.a},f355:function(e){e.exports=JSON.parse('{"downloadZipUrl":"http://www.shadowingszy.top/notebook-download/","devServerUrl":"http://www.shadowingszy.top/inspiration-notebook/"}')}}]);